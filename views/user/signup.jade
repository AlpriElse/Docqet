extends ../layout

block content
    .container(style='margin-top:50px', ng-app='signup')
        if message && message.length > 0
            .alert.alert-danger(role='alert') #{message}
        .panel.panel-default.col-md-4.col-md-offset-4(ng-controller='MainController')
            .panel-body
                h1.text-xs-center Sign Up
                br
                form(action='/signup', method='POST')
                    .form-group
                        input.form-control(ng-model='name', type='text', name='name', placeholder='name')
                    .form-group
                        input.form-control(ng-model='email',ng-blur='checkEmail()', type='email', name='email', placeholder='email')
                    .form-group
                        input.form-control(ng-model='password',type='password', name='password', placeholder='password')
                    .form-group
                        input.form-control(ng-model='betaKey',type='text', name='beta key', placeholder='beta key')
                    
                    
                    button.btn.btn-block.btn-primary(type='submit') Submit
    script.
        (function() {
            var app = angular.module('signup', []);
            
            app.controller('MainController', ['$scope','$http', function($scope, $http) {
                $scope.submit = function() {
                    $scope.submitted = true;
                    $http.post(url, {
                        
                    });
                }
                $scope.checkEmail = function() {
                    console.log('called');
                    var url = '/operations/checkEmail/' + $scope.email;
                    var isTaken = $http.get(url).then(function(res) {
                        console.log(res);
                    }, function(res) {
                        console.log(res);
                    });
                }
            }]);
        }());
